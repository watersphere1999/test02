(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[38],{1088:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return K}));var a=o(24),n=o(27),r=o.n(n),c=o(44),i=o(0),s=o.n(i),l=o(175),p=o(6),d=o(109),u=o(585),f=o(333),g=o(74),h=o(943),m=o.n(h),b=o(944),x=o.n(b),k=o(945),j=o.n(k),v=o(65),O=o(25),y=o.p+"static/media/sample.c5c1fd6a.jpg",w=o(937),I=o.n(w),S=o(938),C=o.n(S),A=o(123),B=o.n(A),_=o.p+"static/media/google-icon.a45b46e9.svg",D=o(939),F=(o(1059),o(941),o(3)),L=s.a.useState,T=s.a.useRef,W=s.a.useLayoutEffect;D.a.apps.length?D.a.app():D.a.initializeApp({apiKey:"AIzaSyAZECXAG-TWAR9_AOlKExuq2tJ-8tWVfA4",authDomain:"go-hiking-test.firebaseapp.com",databaseURL:"https://go-hiking-test-default-rtdb.europe-west1.firebasedatabase.app",projectId:"go-hiking-test",storageBucket:"go-hiking-test.appspot.com",messagingSenderId:"1009464473437",appId:"1:1009464473437:web:b6283b9c93964195409ab4",measurementId:"G-DLB3B3L50D"});var R=Object(l.a)((function(e){return{container:{display:"flex",flexDirection:"column",width:"100%",height:"100%"},root:{maxheight:"600",width:"100%",margin:"0",padding:"0",overflowX:"hidden",objectFit:"cover"},google:{margin:"auto"},facebook:{display:"flex",backgroundColor:"#4267b2",letterSpacing:2,color:"#ffffff",width:"92%",height:"44px",marginBottom:"16px",margin:"auto"},newFacebook:{width:"92%",height:"44px",borderRadius:"4px",background:"#4267b2",color:"#ffffff",border:"0px transparent",letterSpacing:2,marginBottom:"16px",margin:"auto",display:"flex",fontSize:"13.5px",padding:"13px 0px 0px",justifyContent:"center",shadowRadius:"15"}}})),E=Object(p.a)((function(){return{root:{display:"flex",backgroundColor:"#ffffff",letterSpacing:1.6,color:"#000000",width:"92%",height:"44px",marginBottom:"16px",margin:"auto",fontWeight:"500"}}}))(f.a),z=Object(p.a)((function(){return{root:{display:"flex",backgroundColor:"#000000",letterSpacing:2,color:"#ffffff",width:"92%",height:"44px",marginBottom:"16px",margin:"auto"}}}))(f.a),G=Object(p.a)((function(){return{root:{display:"flex",backgroundColor:"#ffffff",letterSpacing:1.6,color:"#000000",width:"92%",height:"44px",margin:"auto",fontWeight:"500"}}}))(f.a),J=Object(d.a)({palette:{primary:{main:"#b000ff",contrastText:"#ffffff"}}});function K(){var e=R(),t=Object(O.k)();var o=function(){var e=Object(c.a)(r.a.mark((function e(o){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(o),a={email:o.profileObj.email,name:o.profileObj.name,google_id:o.profileObj.googleId,avatar:o.profileObj.imageUrl,token:o.tokenId},console.log("data: "+a),e.next=5,B.a.post("https://gohiking-server.herokuapp.com/api/auth/social/callback",a).then((function(e){console.log("====second response==== ",e),console.log("====second response token==== ",e.data.token),localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.userId),t.push("/home")})).catch((function(e){console.log("====error==== ",e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=Object(c.a)(r.a.mark((function e(o){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("====response===== ",o),a={email:o.email,name:o.name,facebook_id:o.id,avatar:o.picture.data.url,token:o.accessToken},console.log("====data====",a),e.next=5,B.a.post("https://gohiking-server.herokuapp.com/api/auth/social/callback",a).then((function(e){console.log("====second response==== ",e),console.log("====second response token==== ",e.data.token),localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.userId),t.push("/home")})).catch((function(e){console.log("====error==== ",e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=L({}),s=Object(a.a)(i,2),l=s[0],p=s[1],d=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("========final data_apple===========",l),e.next=3,B.a.post("https://gohiking-server.herokuapp.com/api/auth/social/callback",l).then((function(e){console.log("====post success====",e),console.log("====second response token====",e.data.token),localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.userId),t.push("/home")})).catch((function(e){console.log("error: ",e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=T(!0);return W((function(){h.current?h.current=!1:d()}),[l]),Object(F.jsxs)("div",{className:e.container,style:{objectFit:"cover"},children:[Object(F.jsx)("div",{style:{width:"100vw",height:381,overflow:"hidden"},children:Object(F.jsx)("img",{src:y,alt:"bg",style:{height:"100%",width:"100%",objectFit:"cover"}})}),Object(F.jsxs)("div",{style:{margin:"16.5px 16px 0px"},children:[Object(F.jsx)(I.a,{clientId:"184500302467-kn257cjsh71fconchpf7dmd52qmdvkkg.apps.googleusercontent.com",render:function(t){return Object(F.jsx)(E,{className:e.google,onClick:t.onClick,disabled:t.disabled,variant:"contained",startIcon:Object(F.jsx)("img",{src:_,style:{height:"18px",weight:"18px"}}),children:"\u900f\u904eGoogle\u767b\u5165"})},buttonText:"\u4f7f\u7528 Google \u767b\u5165",onSuccess:o,onFailure:o,cookiePolicy:"single_host_origin"}),Object(F.jsx)(C.a,{appId:"1311202525878900",autoLoad:!1,onClick:function(){return console.log("clicked!")},callback:n,fields:"name,email,picture",cssClass:e.newFacebook,textButton:"\u900f\u904eFACEBOOK\u767b\u5165",icon:Object(F.jsx)(m.a,{style:{color:"#ffffff",marginRight:"5px",fontSize:"24px",paddingBottom:"4px"}})}),Object(F.jsx)(z,{variant:"contained",onClick:function(){var e={},t=new D.a.auth.OAuthProvider("apple.com");t.addScope("email"),t.addScope("name"),D.a.auth().signInWithPopup(t).then((function(t){console.log("====result==== ",t);var o=t.user.providerData[0].email,a="",n=!1;o.split("").forEach((function(e){"@"==e||1==n?n=!0:a+=e})),e={email:t.user.providerData[0].email,name:a,apple_id:t.user.uid,avatar:"https://imgur.com/gallery/TX5W1uj",token:t.credential.idToken},console.log("data_apple:",e),p(e)})).catch((function(e){e.code,e.message,e.email,e.credential}))},startIcon:Object(F.jsx)(x.a,{style:{color:"#ffffff"}}),children:"\u900f\u904eApple ID\u767b\u5165"}),Object(F.jsx)(G,{variant:"contained",onClick:function(){t.push("/login1_1")},startIcon:Object(F.jsx)(j.a,{style:{color:"#000000"}}),children:"\u900f\u904eMail\u767b\u5165"})]}),Object(F.jsx)(u.a,{theme:J,children:Object(F.jsx)("div",{style:{margin:"24px 0px 0px 0px"}})}),Object(F.jsxs)(g.a,{variant:"body2",component:"p",style:{color:"black",direction:"column",textAlign:"center"},children:["\u9084\u4e0d\u662f\u6703\u54e1\u55ce? ",Object(F.jsx)(v.Link,{to:"/signup",style:{color:"#000000"},children:"\u8a3b\u518a\u65b0\u5e33\u865f"})]}),Object(F.jsx)(f.a,{variant:"outlined",component:v.Link,to:"/home",style:{color:"#00d04c",fontWeight:"700",borderColor:"#00d04c",width:"182px",height:"40px",margin:"auto",marginTop:"16px"},children:"\u76f4\u63a5\u4f7f\u7528"})]})}}}]);
//# sourceMappingURL=38.78bc2666.chunk.js.map